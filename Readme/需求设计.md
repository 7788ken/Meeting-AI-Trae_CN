# AI会议助手需求设计文档

## 1. 项目概述

AI会议助手是一款轻量级的Web智能应用，设计用于在**各类在线会议软件**（如Zoom、Teams、腾讯会议等）或**线下会议**进行中实时打开使用。它通过设备麦克风捕获会议语音，使用豆包流语音识别模型2.0实时转写文字，自动识别发言者，并提供基于AI大模型的会议内容分析和问答功能。

核心定位：**会议实时辅助工具**，而非独立的会议管理系统。

## 2. 核心功能需求

### 2.1 实时语音处理
- **麦克风权限管理**：清晰的权限请求和指引
- **实时录音捕获**：捕获会议中的语音流
- **实时语音转写**：使用豆包流语音识别模型2.0将语音实时转换为文字
- **智能标点添加**：自动为转写内容添加标点符号
- **发言者自动识别**：自动区分不同的发言者并标记

### 2.2 实时转写展示
- **实时滚动显示**：转写结果实时显示，新内容自动滚动到底部
- **发言者色彩区分**：不同发言者使用不同颜色标识
- **转写置信度显示**：可选显示转写置信度
- **实时编辑**：支持实时修改转写错误的文字

### 2.3 上下文管理
- **自动上下文构建**：随着会议进行，自动构建完整的会议上下文
- **关键信息标记**：智能识别并标记会议中的关键信息
- **上下文实时更新**：新发言自动添加到上下文
- **单/多发言关联**：支持基于单条或多条发言生成分析

### 2.4 AI智能分析
- **核心分析类型**：
  - 要点提炼：提取发言的核心思想
  - 简要回答：生成简洁的针对性回答
  - 深度分析：生成详细的深度解读
- **多模型支持**：支持从千问、doubao、GLM、MINIMAX、KIMI、DC中选择模型
- **上下文感知**：AI分析基于当前会议的完整上下文
- **分析结果导出**：支持导出AI分析结果

### 2.5 发言记录管理
- **发言列表**：按时间顺序展示所有发言
- **关键词搜索**：快速定位相关发言
- **发言标记**：支持手动标记重要发言
- **记录保存**：支持保存完整的会议记录（转写+分析）

### 2.6 设备适配
- **跨设备兼容**：适配PC、平板、手机等设备
- **多种麦克风支持**：支持内置和外接麦克风
- **背景噪音抑制**：智能抑制背景噪音

## 3. 用户流程

### 3.1 核心使用流程
1. 用户在**现有会议进行中**（在线或线下）打开AI会议助手
2. 系统请求麦克风权限
3. 用户授权麦克风访问
4. 系统开始实时录音和转写
5. 转写结果实时显示在界面上
6. 用户可随时：
   - 点击单条发言生成AI分析
   - 编辑转写错误的文字
   - 标记重要发言
   - 切换AI模型
7. 会议结束后，用户可：
   - 保存完整记录
   - 导出AI分析结果
   - 清空当前记录准备下一场会议

### 3.2 异常流程处理
1. **麦克风权限被拒绝**：显示友好提示，指导用户开启权限
2. **网络连接中断**：本地保存转写数据，网络恢复后自动同步
3. **AI模型调用失败**：提示错误信息，允许重试或切换模型
4. **浏览器不支持**：提示用户使用兼容浏览器

## 4. 数据模型设计

### 4.1 数据关系图
```
会议会话（Session） ── 1:N ── 发言记录（Speech）
发言记录（Speech） ── 1:N ── AI分析（AIAnalysis）
发言记录（Speech） ── N:1 ── 发言者（Speaker）
```

### 4.2 会议会话表（Session）
| 字段名 | 数据类型 | 描述 | 约束 |
|--------|----------|------|------|
| id | String | 会话唯一标识符 | PRIMARY KEY |
| started_at | Timestamp | 会话开始时间 | NOT NULL, DEFAULT CURRENT_TIMESTAMP |
| ended_at | Timestamp | 会话结束时间 | NULLABLE |
| duration | Number | 会话时长（秒） | NULLABLE |
| settings | JSON | 会话设置（录音质量、语言等） | NULLABLE |
| is_active | Boolean | 是否活跃 | NOT NULL, DEFAULT TRUE |

### 4.3 发言者表（Speaker）
| 字段名 | 数据类型 | 描述 | 约束 |
|--------|----------|------|------|
| id | String | 发言者唯一标识符 | PRIMARY KEY |
| name | String | 发言者名称 | NOT NULL, 长度限制：100 |
| color | String | 显示颜色 | NOT NULL, 格式：#RRGGBB |
| session_id | String | 所属会话ID | FOREIGN KEY (session_id) REFERENCES Session(id) |

### 4.4 发言记录表（Speech）
| 字段名 | 数据类型 | 描述 | 约束 |
|--------|----------|------|------|
| id | String | 发言唯一标识符 | PRIMARY KEY |
| session_id | String | 所属会话ID | FOREIGN KEY (session_id) REFERENCES Session(id) |
| speaker_id | String | 发言者ID | FOREIGN KEY (speaker_id) REFERENCES Speaker(id) |
| content | Text | 发言内容 | NOT NULL |
| start_time | Timestamp | 发言开始时间 | NOT NULL |
| end_time | Timestamp | 发言结束时间 | NOT NULL |
| duration | Number | 发言时长（秒） | NOT NULL, DEFAULT 0 |
| confidence | Number | 转写置信度 | NOT NULL, DEFAULT 0 |
| is_edited | Boolean | 是否被编辑 | NOT NULL, DEFAULT FALSE |
| is_marked | Boolean | 是否被标记 | NOT NULL, DEFAULT FALSE |

### 4.5 AI分析表（AIAnalysis）
| 字段名 | 数据类型 | 描述 | 约束 |
|--------|----------|------|------|
| id | String | 分析唯一标识符 | PRIMARY KEY |
| speech_id | String | 关联发言ID | FOREIGN KEY (speech_id) REFERENCES Speech(id) |
| session_id | String | 所属会话ID | FOREIGN KEY (session_id) REFERENCES Session(id) |
| core_analysis | Text | 核心要点分析 | NOT NULL |
| brief_answer | Text | 简要回答 | NOT NULL |
| deep_answer | Text | 深度分析 | NOT NULL |
| model_used | String | 使用的AI模型 | NOT NULL |
| generated_at | Timestamp | 分析生成时间 | NOT NULL, DEFAULT CURRENT_TIMESTAMP |

## 5. 非功能需求

### 5.1 性能需求
- 语音转写延迟：≤1秒
- AI分析生成时间：≤5秒（取决于模型和网络）
- 界面响应时间：≤200ms
- 支持同时处理的发言长度：≥2小时

### 5.2 可用性需求
- 界面简洁，核心功能一目了然
- 操作流程≤3步即可完成核心功能
- 支持主流现代浏览器（Chrome、Firefox、Safari、Edge）
- 响应式设计，适配不同屏幕尺寸

### 5.3 可靠性需求
- 数据自动保存，防止意外关闭丢失
- 支持离线使用（本地存储）
- 错误提示友好，提供解决方案

### 5.4 安全性需求
- 明确的麦克风权限提示
- 数据加密传输
- 本地数据加密存储

### 5.5 部署需求
- 轻量部署，依赖少
- 支持Docker容器化
- 支持本地和云部署

## 6. UI/UX设计

### 6.1 设计原则
- **极简设计**：去除一切非核心元素
- **焦点突出**：核心功能（录音状态、转写结果、AI分析）占据主要空间
- **色彩方案**：
  - 主色调：深蓝色（#1890ff），代表专业
  - 辅助色：绿色（#52c41a）用于正常状态，红色（#ff4d4f）用于录音状态
  - 发言者颜色：使用柔和的彩色系区分
- **字体**：无衬线字体，清晰易读

### 6.2 主要界面设计

#### 6.2.1 主界面（核心操作界面）
- **顶部栏**：
  - 左侧：应用名称 "AI会议助手"
  - 右侧：
    - 录音状态按钮（开始/停止）
    - 模型选择下拉菜单
    - 设置按钮
  - 录音状态指示器：红色圆点闪烁表示正在录音
- **主内容区**：
  - **PC端（左右排列）**：
    - **左侧（60%宽度）**：实时转写显示区
      - 按时间顺序显示发言
      - 不同发言者用不同颜色标识
      - 支持实时编辑
      - 新发言自动滚动到底部
      - 只有转写成功的消息可点击
    - **右侧（40%宽度）**：AI分析区
      - 初始状态：显示"点击左侧发言查看AI分析"提示
      - 点击左侧转写成功的消息后：
        - 标签页：要点提炼/简要回答/深度分析
        - 分析结果显示
        - 重新生成按钮
        - 复制/导出按钮
  - **移动端**：
    - 仅显示实时转写显示区
    - 转写成功的消息可点击
    - 点击消息后：
      - 进入AI分析页面
      - 显示该消息的AI分析结果
      - 提供返回按钮回到转写页面
- **底部操作栏**：
  - 发言标记按钮
  - 关键词搜索框
  - 清空记录按钮

#### 6.2.2 设置界面
- **麦克风设置**：选择麦克风设备
- **转写设置**：
  - 语言选择
  - 标点添加开关
  - 置信度显示开关
- **AI模型设置**：
  - 默认模型选择
  - 模型参数调整
- **外观设置**：
  - 主题切换（浅色/深色）
  - 字体大小调整
  - 发言者颜色设置

#### 6.2.3 发言编辑弹窗
- 点击发言内容可快速编辑
- 支持修改发言者
- 支持调整发言时间

### 6.3 交互设计
- **录音控制**：
  - 一键开始/停止录音
  - 录音状态清晰可见（红色指示器）
- **AI分析触发**：
  - 仅转写成功的消息可点击触发AI分析
  - PC端：点击左侧消息，右侧显示分析结果
  - 移动端：点击消息进入独立的AI分析页面
  - 支持多选发言生成综合分析
- **实时反馈**：
  - 转写过程实时显示
  - AI分析加载状态明确
  - 操作结果即时反馈

### 6.4 响应式设计
- **PC端**：
  - 左右分栏布局
  - 左侧：实时转写显示区（60%）
  - 右侧：AI分析区（40%）
  - 支持全屏模式
- **平板端**：
  - 默认左右分栏
  - 可切换为上下分栏
  - 点击消息显示AI分析
- **移动端**：
  - 仅显示实时转写区
  - 转写成功的消息可点击
  - 点击消息进入独立的AI分析页面
  - 核心功能优先显示

## 7. 技术选型

### 7.1 架构设计
- **架构模式**：前后端分离，轻量级设计
- **前端**：单页应用（SPA）
- **后端**：RESTful API + WebSocket（实时通信）

### 7.2 前端技术栈
| 技术 | 版本 | 选型理由 |
|------|------|----------|
| Vue 3.x | 3.4.x | 生态成熟，响应式设计，性能优秀，开发效率高 |
| TypeScript | 5.x | 静态类型检查，提高代码质量 |
| Vite | 5.x | 快速构建，热更新，适合轻量级应用 |
| Element Plus | 2.5.x | 组件丰富，设计美观，响应式支持 |
| Pinia | 2.1.x | 轻量级状态管理 |
| WebSocket | - | 实时语音数据传输 |

### 7.3 后端技术栈
| 技术 | 版本 | 选型理由 |
|------|------|----------|
| Node.js | 18.18.x | 高性能，事件驱动，适合实时应用 |
| NestJS | 10.3.x | 模块化架构，适合构建高效API |
| PostgreSQL | 15.4.x | 可靠的关系型数据库，适合结构化数据 |
| MongoDB | 6.0.x | 适合存储半结构化的发言和分析数据 |
| Prisma | 5.7.x | 统一的ORM，简化数据库操作 |
| Redis | 7.2.x | 缓存，提高性能 |
| RabbitMQ | 3.12.x | 消息队列，处理异步任务 |

### 7.4 第三方服务
| 服务类型 | 服务商 | 选型理由 |
|----------|--------|----------|
| 语音识别 | 火山引擎（豆包流语音识别模型2.0） | 实时性好，准确率高 |
| AI大模型 | 千问、doubao、GLM、MINIMAX、KIMI、DC | 多模型支持，覆盖不同需求 |

## 8. 风险评估与缓解措施

### 8.1 技术风险
| 风险 | 影响 | 概率 | 缓解措施 |
|------|------|------|----------|
| 语音识别准确率低 | 转写结果错误，影响用户体验 | 中 | 1. 使用豆包流语音识别模型2.0提高准确率<br>2. 提供实时编辑功能<br>3. 优化录音环境提示<br>4. 实现背景噪音抑制 |
| AI模型服务不稳定 | AI分析失败，影响功能使用 | 中 | 1. 实现多模型降级策略<br>2. 提供重试机制<br>3. 支持从千问、doubao、GLM、MINIMAX、KIMI、DC中切换模型<br>4. 本地缓存AI分析结果 |
| 浏览器兼容性问题 | 部分功能在旧版浏览器中不支持 | 低 | 1. 仅支持主流现代浏览器<br>2. 提供浏览器检测和提示<br>3. 渐进增强设计 |
| 长时间会议数据处理 | 大量数据导致应用卡顿 | 中 | 1. 实现虚拟滚动优化列表性能<br>2. 本地存储+定期同步策略<br>3. 数据分页加载 |
| 网络连接中断 | 实时功能失效 | 中 | 1. 支持离线使用，本地存储转写数据<br>2. 网络恢复后自动同步<br>3. 关键功能本地优先 |

### 8.2 隐私与安全风险
| 风险 | 影响 | 概率 | 缓解措施 |
|------|------|------|----------|
| 语音数据泄露 | 用户隐私受到侵犯 | 低 | 1. 明确的麦克风权限提示<br>2. 数据加密传输<br>3. 本地数据加密存储 |
| 未授权访问 | 会议记录被非法获取 | 低 | 1. 实现JWT认证<br>2. 数据访问权限控制<br>3. 定期安全审计 |
| 麦克风滥用 | 用户隐私受到侵犯 | 低 | 1. 清晰的录音状态指示<br>2. 一键停止录音功能<br>3. 录音权限仅在应用内有效 |

## 9. 迭代计划

### 9.1 阶段划分与时间估计
| 阶段 | 时间跨度 | 主要目标 |
|------|----------|----------|
| **第一阶段（核心功能）** | 3-4周 | 实现实时语音转写、AI分析核心功能 |
| **第二阶段（功能增强）** | 2-3周 | 优化发言者识别，支持多模型切换 |
| **第三阶段（体验优化）** | 1-2周 | 优化UI/UX，添加移动端适配 |
| **第四阶段（扩展功能）** | 2-3周 | 添加记录保存、导出功能，离线支持 |

### 9.2 第一阶段详细计划

#### 9.2.1 第1-2周：基础架构搭建
- 前端项目初始化（Vue 3 + TypeScript + Vite）
- 后端项目初始化（NestJS + PostgreSQL + MongoDB + Prisma）
- WebSocket实时通信实现
- 豆包流语音识别API集成

#### 9.2.2 第3-4周：核心功能实现
- 实时录音和转写功能
- 发言者自动识别
- 单条发言AI分析（要点提炼、简要回答、深度分析）
- 多模型支持（千问、doubao、GLM）

### 9.3 第二阶段详细计划

#### 9.3.1 第1-2周：功能增强
- 优化发言者识别算法
- 支持手动调整发言者
- 增加MINIMAX、KIMI、DC模型支持
- 实现多发言关联分析

#### 9.3.2 第3周：性能优化
- 优化实时转写性能
- 减少AI分析延迟
- 优化大数据量处理

### 9.4 第三阶段详细计划

#### 9.4.1 第1-2周：UI/UX优化
- 极简界面设计
- 响应式适配
- 移动端优化
- 用户体验测试和改进

### 9.5 第四阶段详细计划

#### 9.5.1 第1-2周：扩展功能
- 发言记录保存功能
- 分析结果导出功能
- 离线使用支持
- 关键词搜索功能

## 10. 结论

AI会议助手是一款轻量级、实时性强的智能会议辅助工具，核心定位是在各类会议进行中提供实时语音转写和AI分析支持。

### 10.1 项目优势
- **核心聚焦**：专注于会议实时辅助，而非独立会议管理
- **技术先进**：采用豆包流语音识别模型2.0和多种AI大模型
- **轻量易用**：极简设计，操作流程≤3步
- **多场景支持**：适配线上/线下各类会议场景
- **多设备兼容**：支持PC、平板、手机等多种设备

### 10.2 预期效果
- 提高会议效率：减少手动记录时间，专注于会议内容
- 增强会议记忆：准确的实时转写，便于会后回顾
- 提供智能支持：AI分析帮助理解和利用会议内容
- 灵活便捷：随时打开即可使用，无需复杂设置

### 10.3 后续发展
- 根据用户反馈持续优化实时转写和AI分析效果
- 探索实时翻译、会议决策支持等扩展AI应用场景
- 支持更多语言和地区
- 提供更丰富的数据分析和可视化功能

通过合理的规划和实施，AI会议助手有望成为一款受用户欢迎的智能会议工具，为用户提供高效、便捷、智能的会议体验。