# AI会议助手系统架构设计文档

## 1. 文档概述

### 1.1 文档目的
本文档详细描述AI会议助手的系统架构、模块划分、模块交互关系等，为开发团队提供明确的架构设计依据，确保系统设计合理、可扩展、可维护。

### 1.2 术语定义
| 术语 | 解释 |
|------|------|
| 前端应用层 | 用户直接交互的界面层 |
| 后端服务层 | 处理业务逻辑和API请求的服务层 |
| 数据存储层 | 存储数据的数据库层 |
| 第三方服务层 | 集成外部服务的服务层 |
| 模块 | 具有特定功能的代码单元 |
| 接口 | 模块之间的交互方式 |

## 2. 系统架构设计

### 2.1 整体架构图

```
┌─────────────────────────────────────────────────────────────────────────┐
│                          用户界面层 (前端)                              │
├─────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐    │
│  │ 会议管理模块 │  │ 录音转写模块 │  │ 发言管理模块│  │  AI分析模块  │    │
│  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘    │
│          │              │                │              │               │
│          └──────────────┼────────────────┼──────────────┘               │
│                         │                │                              │
│                    ┌─────────────┐                                      │
│                    │  状态管理模块  │                                      │
│                    └─────────────┘                                      │
└─────────────────────────────────────────────────────────────────────────┘
                                  │
                                  ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                          API网关层                                     │
├─────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐    │
│  │  请求路由   │  │  负载均衡   │  │  认证授权   │  │  日志记录   │    │
│  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘    │
└─────────────────────────────────────────────────────────────────────────┘
                                  │
                                  ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                          后端服务层                                     │
├─────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐    │
│  │ 会议会话服务 │  │ 语音处理服务 │  │  AI服务     │  │ 数据存储服务 │    │
│  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘    │
└─────────────────────────────────────────────────────────────────────────┘
                                  │
                                  ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                          中间件层                                     │
├─────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐                     │
│  │ RabbitMQ    │  │ Consul       │  │ Redis        │                     │
│  └─────────────┘  └─────────────┘  └─────────────┘                     │
└─────────────────────────────────────────────────────────────────────────┘
                                  │
                                  ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                          数据存储层                                     │
├─────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐                     │
│  │ PostgreSQL  │  │ MongoDB     │  │ 对象存储（自建/云）│             │
│  └─────────────┘  └─────────────┘  └─────────────┘                     │
└─────────────────────────────────────────────────────────────────────────┘
                                  │
                                  ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                          第三方服务层                                   │
├─────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐                     │
│  │ 语音识别API │  │  AI大模型API │  │ 其他服务     │                     │
│  └─────────────┘  └─────────────┘  └─────────────┘                     │
└─────────────────────────────────────────────────────────────────────────┘
```

### 2.2 架构说明

#### 2.2.1 用户界面层（前端）
用户直接交互的界面层，基于Vue 3框架开发，包括以下模块：

- **会议管理模块**：负责会议的创建、查看、编辑、删除等功能
- **录音转写模块**：负责麦克风录音、语音转写等功能
- **发言管理模块**：负责发言记录的展示、编辑、搜索等功能
- **AI分析模块**：负责AI分析的生成、展示、模型切换等功能
- **状态管理模块**：负责管理应用的状态，使用Pinia实现

#### 2.2.2 API网关层
负责处理前端请求的入口，包括：

- **请求路由**：将请求路由到对应的后端服务
- **负载均衡**：在多台服务器之间分配请求，提高系统性能
- **认证授权**：验证用户身份和权限
- **日志记录**：记录请求日志，便于监控和故障排查

#### 2.2.3 后端服务层
处理业务逻辑的服务层，基于Node.js和NestJS框架开发，包括：

- **会议会话服务**：处理会议会话相关的业务逻辑
- **语音处理服务**：处理语音录音、转写、发言者识别等逻辑
- **AI服务**：处理AI分析、回答生成等逻辑
- **数据存储服务**：处理数据的存储和查询逻辑
- **用户服务**：处理用户身份认证和权限管理
- **配置服务**：处理系统配置管理

#### 2.2.4 中间件层
处理服务间通信和系统中间件，包括：

- **RabbitMQ**：消息队列，用于异步通信和任务调度
- **Consul**：服务发现，用于微服务架构中的服务注册和发现
- **Redis**：缓存，用于提高系统性能和存储临时数据

#### 2.2.5 数据存储层
存储数据的数据库层，包括：

- **PostgreSQL**：存储结构化数据，如会议基本信息、用户信息等
- **MongoDB**：存储半结构化数据，如发言记录、AI分析结果等
- **对象存储**：存储录音文件和导出的会议记录

#### 2.2.5 第三方服务层
集成外部服务的服务层，包括：

- **语音识别API**：如讯飞、百度等语音识别服务
- **AI大模型API**：如GLM、MINIMAX、KIMI、千问等AI模型服务
- **其他服务**：如CDN、DDoS防护等服务

## 3. 模块划分与功能描述

### 3.1 前端模块

#### 3.1.1 会议管理模块
**功能描述**：
- 会议列表展示
- 会议创建、编辑、删除
- 会议搜索和筛选
- 会议状态管理

**依赖关系**：
- 后端会议会话服务API
- 状态管理模块

#### 3.1.2 录音转写模块
**功能描述**：
- 麦克风权限请求和管理
- 录音控制（开始、暂停、停止）
- 实时语音转写
- 转写结果展示

**依赖关系**：
- 浏览器Web Speech API或第三方语音识别SDK
- 后端语音处理服务API
- 状态管理模块

#### 3.1.3 发言管理模块
**功能描述**：
- 发言列表展示
- 发言详情查看和编辑
- 发言搜索和筛选
- 发言者管理

**依赖关系**：
- 后端数据存储服务API
- 状态管理模块

#### 3.1.4 AI分析模块
**功能描述**：
- AI分析生成
- 分析结果展示（核心分析、简要回答、深度回答）
- 模型选择和切换
- 分析结果复制和导出

**依赖关系**：
- 后端AI服务API
- 状态管理模块

#### 3.1.5 状态管理模块
**功能描述**：
- 管理应用的全局状态
- 提供状态更新和获取的接口
- 处理状态的持久化

**依赖关系**：
- Pinia状态管理库

### 3.2 后端模块

#### 3.2.1 会议会话服务
**功能描述**：
- 会议会话的创建和管理
- 会话状态管理（活跃/结束）
- 会话统计信息生成

**依赖关系**：
- PostgreSQL数据库
- 数据存储服务

#### 3.2.2 语音处理服务
**功能描述**：
- 语音录音的接收和处理
- 语音转写的调用和结果处理
- 发言者识别

**依赖关系**：
- 第三方语音识别API
- MongoDB数据库
- 数据存储服务

#### 3.2.3 AI服务
**功能描述**：
- AI分析请求的处理
- 多模型支持和切换
- 分析结果的生成和存储

**依赖关系**：
- 第三方AI大模型API
- MongoDB数据库
- 数据存储服务

#### 3.2.4 数据存储服务
**功能描述**：
- 数据的存储和查询
- 数据库连接管理
- 数据备份和恢复

**依赖关系**：
- PostgreSQL数据库
- MongoDB数据库
- 对象存储服务

## 4. 模块交互关系

### 4.1 前端模块交互

```
┌─────────────┐      ┌─────────────┐      ┌─────────────┐
│ 会议管理模块 │─────▶│ 状态管理模块 │◀─────│ 录音转写模块 │
└─────────────┘      └─────────────┘      └─────────────┘
          ▲                  ▲                  ▲
          │                  │                  │
          │                  │                  │
┌─────────────┐      ┌─────────────┐      ┌─────────────┐
│ 发言管理模块 │─────▶│ 状态管理模块 │◀─────│  AI分析模块  │
└─────────────┘      └─────────────┘      └─────────────┘
```

### 4.2 前后端模块交互

```
┌─────────────┐      ┌─────────────┐      ┌─────────────┐
│ 前端模块    │─────▶│ API网关层   │─────▶│ 后端服务层   │
└─────────────┘      └─────────────┘      └─────────────┘
          ▲                                      │
          │                                      ▼
┌─────────────┐      ┌─────────────┐      ┌─────────────┐
│ 前端模块    │◀─────│ API网关层   │◀─────│ 数据存储层   │
└─────────────┘      └─────────────┘      └─────────────┘
```

### 4.3 后端模块交互

```
┌─────────────┐      ┌─────────────┐      ┌─────────────┐
│ 会议会话服务 │─────▶│ 数据存储服务 │◀─────│ 语音处理服务 │
└─────────────┘      └─────────────┘      └─────────────┘
          ▲                                      │
          │                                      ▼
┌─────────────┐      ┌─────────────┐      ┌─────────────┐
│  AI服务     │─────▶│ 数据存储服务 │◀─────│ 第三方服务层 │
└─────────────┘      └─────────────┘      └─────────────┘
```

## 5. 接口设计原则

### 5.1 前端接口设计原则

- 使用RESTful API设计风格
- 接口命名清晰，易于理解
- 支持JSON格式的数据传输
- 支持错误处理和状态码返回
- 支持跨域请求

### 5.2 后端接口设计原则

- 模块化设计，接口职责单一
- 支持版本控制
- 支持请求参数验证
- 支持响应数据格式化
- 支持日志记录

## 6. 技术选型确认

### 6.1 前端技术栈
| 技术 | 版本 | 用途 |
|------|------|------|
| Vue | 3.x | 前端框架 |
| Element Plus | 2.x | UI组件库 |
| Pinia | 2.x | 状态管理 |
| Vue Router | 4.x | 路由管理 |
| Axios | 1.x | HTTP客户端 |
| Vite | 4.x | 构建工具 |
| TypeScript | 5.x | 类型检查 |

### 6.2 后端技术栈
| 技术 | 版本 | 用途 |
|------|------|------|
| Node.js | 18.18.x | 运行环境 |
| NestJS | 10.3.x | Web框架 |
| PM2 | 5.3.x | 进程管理 |
| PostgreSQL | 15.4.x | 关系型数据库 |
| MongoDB | 6.0.x | 文档型数据库 |
| Prisma | 5.7.x | 数据库ORM |
| Redis | 7.2.x | 缓存层 |
| RabbitMQ | 3.12.x | 消息队列 |
| JWT | 9.0.x | 认证授权 |
| Winston | 3.11.x | 日志管理 |
| Swagger | 4.6.x | API文档 |

### 6.3 第三方服务
| 服务类型 | 推荐服务商 | 调用成本（元/千tokens） |
|----------|------------|------------------------|
| 语音识别API | 火山引擎（豆包流语音识别模型2.0） | - |
| AI大模型API | 千问 | 0.15 |
| AI大模型API | doubao | 0.2 |
| AI大模型API | GLM（智谱AI） | 0.2 |
| AI大模型API | MINIMAX | 0.3 |
| AI大模型API | KIMI | 0.4 |
| AI大模型API | DC | 0.5 |
| 云服务器 | AWS EC2、阿里云ECS、腾讯云CVM | - |
| 云数据库 | AWS RDS PostgreSQL、MongoDB Atlas | - |
| 对象存储 | 自建服务器 | - |

## 7. 系统扩展性设计

### 7.1 模块化设计
- 系统采用模块化设计，便于功能扩展
- 模块之间通过接口交互，降低耦合度
- 支持热插拔，便于添加新模块

### 7.2 微服务架构
- 支持将后端服务拆分为微服务
- 每个微服务独立部署和扩展
- 支持服务注册和发现

### 7.3 多环境支持
- 支持开发、测试、预发布、生产等多环境
- 环境配置隔离，便于管理

### 7.4 插件化设计
- 支持插件化扩展，便于添加新功能
- 插件之间相互独立，降低影响

## 8. 系统安全性设计

### 8.1 数据安全
- 数据加密存储和传输
- 访问权限控制
- 定期安全扫描和漏洞修复

### 8.2 身份认证
- JWT认证
- 支持第三方登录
- 密码加密存储

### 8.3 防护措施
- DDoS防护
- SQL注入防护
- XSS防护
- CSRF防护

## 9. 系统可靠性设计

### 9.1 高可用性设计
- 服务器集群部署
- 负载均衡
- 自动故障转移

### 9.2 数据备份与恢复
- 数据库定期备份
- 异地备份
- 支持数据恢复

### 9.3 监控与告警
- 系统监控
- 日志管理
- 异常告警

## 10. 附录

### 10.1 参考文档
- AI会议助手功能需求说明书
- 技术选型文档
- 数据模型设计文档

### 10.2 版本历史
| 版本 | 日期 | 作者 | 变更内容 |
|------|------|------|----------|
| V1.0 | 2026-01-09 | AI助手 | 初始版本 |
