# 语音转文字功能配置说明

## 一、功能概述

本项目实现了基于火山引擎的实时语音转文字功能，支持以下特性：

1. **实时语音转写**：通过WebSocket实现实时音频流传输和转写
2. **文件方式转写**：支持上传音频文件进行转写
3. **多语言支持**：支持中文、英文等多种语言
4. **发言者识别**：自动识别不同发言者

## 二、配置步骤

### 1. 环境变量配置

在backend目录下创建.env文件，配置以下环境变量：

```env
PORT=3000
MONGO_URI=mongodb://localhost:27017/ai_meeting_assistant

# 火山引擎语音识别配置
TRANSCRIPT_ENDPOINT=wss://transcribe.bytedance.com/v1/transcript
TRANSCRIPT_APP_KEY=your_app_key_here
TRANSCRIPT_ACCESS_KEY=your_access_key_here
TRANSCRIPT_RESOURCE_ID=your_resource_id_here
```

### 2. 依赖安装

安装后端依赖：

```bash
cd backend
npm install
```

安装前端依赖：

```bash
cd frontend
npm install
```

### 3. 启动服务

启动后端服务：

```bash
cd backend
npm run start:dev
```

启动前端服务：

```bash
cd frontend
npm run dev
```

## 三、API测试

### 1. 实时语音转写测试

使用WebSocket客户端连接到以下地址：

```
ws://localhost:3000
```

发送以下消息开始录音：

```json
{
  "event": "start_recording",
  "data": {
    "session_id": "test_session_123"
  }
}
```

### 2. 文件方式转写测试

使用curl命令测试文件转写API：

```bash
curl -X POST http://localhost:3000/api/speech-to-text \
  -H "Content-Type: application/json" \
  -d '{
    "audio_url": "https://example.com/audio.mp3",
    "language": "zh-CN",
    "service": "volcengine"
  }'
```

## 四、常见问题

### 1. Socket连接失败

- 检查后端服务是否正常启动
- 检查防火墙设置，确保3000端口开放
- 检查.env文件中的配置是否正确

### 2. 语音转写无结果

- 检查麦克风权限是否已授予
- 检查网络连接是否正常
- 检查火山引擎API密钥是否有效

### 3. 音频质量问题

- 确保麦克风正常工作
- 尽量在安静的环境中使用
- 调整音量增益参数

## 五、技术支持

如果遇到问题，请联系：

- 开发团队：AI会议助手开发组
- 文档地址：https://docs.example.com
- 故障排查：https://docs.example.com/troubleshooting
